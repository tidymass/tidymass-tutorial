[
  {
    "objectID": "2-1-create_mass_dataset.html",
    "href": "2-1-create_mass_dataset.html",
    "title": "5  Create mass_dataset class",
    "section": "",
    "text": "5.1 Data preparation\nHere, you can learn how to create mass_dataset class object using tidymass.\nThe massdataset class object can be used to store the untargeted metabolomics data.\nLet’s first prepare the data objects according to the attached figure for each file.",
    "crumbs": [
      "massdataset package",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Create mass_dataset class</span>"
    ]
  },
  {
    "objectID": "2-1-create_mass_dataset.html#data-preparation",
    "href": "2-1-create_mass_dataset.html#data-preparation",
    "title": "5  Create mass_dataset class",
    "section": "",
    "text": "5.1.1 sample_info (required)\nThe columns sample_id (sample ID), injection.order (injection order of samples), class (Blank, QC, Subject, etc), group (case, control, etc) are required.\n\n\n\n5.1.2 variable_info (required)\nThe columns variable_id (variable ID), mz (mass to charge ratio), rt (retention time, unit is second) are required.\n\n\n\n5.1.3 expression_data (required)\nColumns are samples are rows are features (variables).\n\nThe column names of expression_data should be completely same with sample_id in sample_info, and the row names of expression_data should be completely same with variable_id in variable_info.\n\n\n\n\n5.1.4 sample_info_note (optional)\nThis is the metadata for sample_info.\n\n\n\n5.1.5 variable_info_note (optional)\nThis is the metadata for variable_info.",
    "crumbs": [
      "massdataset package",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Create mass_dataset class</span>"
    ]
  },
  {
    "objectID": "2-1-create_mass_dataset.html#download-demo-data",
    "href": "2-1-create_mass_dataset.html#download-demo-data",
    "title": "5  Create mass_dataset class",
    "section": "5.2 Download demo data",
    "text": "5.2 Download demo data\nHere we use the demo data from masssprocesser package. The demo data can be downloaded here.\nDownload this data and uncompress it. And then set the path where you put the folder as working directory.\nThen prepare data.\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\npeak_table_pos = readr::read_csv(\"demo_data/feature_table/Peak_table_pos.csv\")\n\nRows: 1612 Columns: 39\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (1): variable_id\ndbl (38): mz, rt, bl20210902_10, bl20210902_11, bl20210902_13, bl20210902_14...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\npeak_table_neg = readr::read_csv(\"demo_data/feature_table/Peak_table_neg.csv\")\n\nRows: 5486 Columns: 39\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (1): variable_id\ndbl (38): mz, rt, X20210902_neg04, X20210902_neg05, X20210902_neg06, X202109...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nsample_info_pos = readr::read_csv(\"demo_data/feature_table/sample_info_pos.csv\")\n\nRows: 36 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (3): sample_id, class, group\ndbl (1): injection.order\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nsample_info_neg = readr::read_csv(\"demo_data/feature_table/sample_info_neg.csv\")\n\nRows: 36 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (3): sample_id, class, group\ndbl (1): injection.order\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nVariable information and expression data are in the peak table. Let’s separate them.\n\nexpression_data_pos = \n  peak_table_pos %&gt;% \n  dplyr::select(-c(variable_id:rt)) %&gt;% \n  as.data.frame()\n\nvariable_info_pos = \n  peak_table_pos %&gt;% \n  dplyr::select(variable_id:rt) %&gt;% \n  as.data.frame()\n\nrownames(expression_data_pos) = variable_info_pos$variable_id\n\nexpression_data_neg = \n  peak_table_neg %&gt;% \n  dplyr::select(-c(variable_id:rt)) %&gt;% \n  as.data.frame()\n\nvariable_info_neg = \n  peak_table_neg %&gt;% \n  dplyr::select(variable_id:rt) %&gt;% \n  as.data.frame()\n\nrownames(expression_data_neg) = variable_info_neg$variable_id\n\ncolnames(expression_data_pos) == sample_info_pos$sample_id\n\n [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE\n\ncolnames(expression_data_neg) == sample_info_neg$sample_id\n\n [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE\n\n\nThe orders of sample_id in sample_info and column names of expression_data are different.\n\nexpression_data_pos = \n  expression_data_pos[,sample_info_pos$sample_id]\n\nexpression_data_neg = \n  expression_data_neg[,sample_info_neg$sample_id]\n\ncolnames(expression_data_pos) == sample_info_pos$sample_id\n\n [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[31] TRUE TRUE TRUE TRUE TRUE TRUE\n\ncolnames(expression_data_neg) == sample_info_neg$sample_id\n\n [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[31] TRUE TRUE TRUE TRUE TRUE TRUE",
    "crumbs": [
      "massdataset package",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Create mass_dataset class</span>"
    ]
  },
  {
    "objectID": "2-1-create_mass_dataset.html#create-mass_data-class-object",
    "href": "2-1-create_mass_dataset.html#create-mass_data-class-object",
    "title": "5  Create mass_dataset class",
    "section": "5.3 Create mass_data class object",
    "text": "5.3 Create mass_data class object\nThen we can create mass_data class object using create_mass_dataset() function.\n\nlibrary(massdataset)\n\nmassdataset 1.0.34 (2025-05-08 11:44:07.24862)\n\n\n\nAttaching package: 'massdataset'\n\n\nThe following object is masked from 'package:stats':\n\n    filter\n\nobject_pos =\n  create_mass_dataset(\n    expression_data = expression_data_pos,\n    sample_info = sample_info_pos,\n    variable_info = variable_info_pos\n  )\n  \nobject_pos\n\n-------------------- \nmassdataset version: 1.0.34 \n-------------------- \n1.expression_data:[ 1612 x 36 data.frame]\n2.sample_info:[ 36 x 4 data.frame]\n36 samples:bl20210902_3 bl20210902_4 bl20210902_5 ... bl20210902_37 bl20210902_38\n3.variable_info:[ 1612 x 3 data.frame]\n1612 variables:M86T44_POS M90T638_POS M91T631_POS ... M1197T265_POS M1198T265_POS\n4.sample_info_note:[ 4 x 2 data.frame]\n5.variable_info_note:[ 3 x 2 data.frame]\n6.ms2_data:[ 0 variables x 0 MS2 spectra]\n-------------------- \nProcessing information\n1 processings in total\ncreate_mass_dataset ---------- \n      Package         Function.used                Time\n1 massdataset create_mass_dataset() 2025-07-20 15:43:32\n\n\nThen negative mode.\n\nobject_neg =\n  create_mass_dataset(\n    expression_data = expression_data_neg,\n    sample_info = sample_info_neg,\n    variable_info = variable_info_neg\n  )\n  \nobject_neg\n\n-------------------- \nmassdataset version: 1.0.34 \n-------------------- \n1.expression_data:[ 5486 x 36 data.frame]\n2.sample_info:[ 36 x 4 data.frame]\n36 samples:X20210902_neg03 X20210902_neg04 X20210902_neg05 ... X20210902_neg37 X20210902_neg38\n3.variable_info:[ 5486 x 3 data.frame]\n5486 variables:M74T229_NEG M88T115_NEG M100T631_NEG ... M1199T22_NEG M1199T180_NEG\n4.sample_info_note:[ 4 x 2 data.frame]\n5.variable_info_note:[ 3 x 2 data.frame]\n6.ms2_data:[ 0 variables x 0 MS2 spectra]\n-------------------- \nProcessing information\n1 processings in total\ncreate_mass_dataset ---------- \n      Package         Function.used                Time\n1 massdataset create_mass_dataset() 2025-07-20 15:43:32\n\n\nThen save them for next analysis.\n\nsave(object_pos, file = \"demo_data/feature_table/object_pos\")\nsave(object_neg, file = \"demo_data/feature_table/object_neg\")",
    "crumbs": [
      "massdataset package",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Create mass_dataset class</span>"
    ]
  },
  {
    "objectID": "2-1-create_mass_dataset.html#export-mass_dataset-class-object-to-csv-for-xlsx",
    "href": "2-1-create_mass_dataset.html#export-mass_dataset-class-object-to-csv-for-xlsx",
    "title": "5  Create mass_dataset class",
    "section": "5.4 Export mass_dataset class object to csv for xlsx",
    "text": "5.4 Export mass_dataset class object to csv for xlsx\n\nexport_mass_dataset(object = object_pos,\n                    file_type = \"xlsx\",\n                    path = \"demo_data/feature_table/demo_data_pos\")\n\nThen all the data will be in the feature_table/demo_data_pos folder.\n ## Session information\n\nsessionInfo()\n\nR version 4.4.1 (2024-06-14)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS 15.5\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Singapore\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] magrittr_2.0.3     masstools_1.0.15   massdataset_1.0.34 lubridate_1.9.3   \n [5] forcats_1.0.0      stringr_1.5.1      dplyr_1.1.4        purrr_1.0.2       \n [9] readr_2.1.5        tidyr_1.3.1        tibble_3.2.1       ggplot2_3.5.1     \n[13] tidyverse_2.0.0   \n\nloaded via a namespace (and not attached):\n  [1] pbapply_1.7-2               remotes_2.5.0              \n  [3] rlang_1.1.4                 clue_0.3-65                \n  [5] GetoptLong_1.0.5            matrixStats_1.4.1          \n  [7] compiler_4.4.1              png_0.1-8                  \n  [9] vctrs_0.6.5                 reshape2_1.4.4             \n [11] rvest_1.0.4                 ProtGenerics_1.36.0        \n [13] pkgconfig_2.0.3             shape_1.4.6.1              \n [15] crayon_1.5.3                fastmap_1.2.0              \n [17] XVector_0.44.0              rmarkdown_2.29             \n [19] tzdb_0.4.0                  preprocessCore_1.66.0      \n [21] UCSC.utils_1.0.0            bit_4.5.0                  \n [23] xfun_0.52                   MultiAssayExperiment_1.30.3\n [25] zlibbioc_1.50.0             GenomeInfoDb_1.40.1        \n [27] jsonlite_1.8.9              DelayedArray_0.30.1        \n [29] BiocParallel_1.38.0         parallel_4.4.1             \n [31] cluster_2.1.6               R6_2.5.1                   \n [33] stringi_1.8.4               RColorBrewer_1.1-3         \n [35] limma_3.60.6                GenomicRanges_1.56.2       \n [37] Rcpp_1.0.13-1               SummarizedExperiment_1.34.0\n [39] iterators_1.0.14            knitr_1.49                 \n [41] IRanges_2.38.1              Matrix_1.7-1               \n [43] igraph_2.1.1                timechange_0.3.0           \n [45] tidyselect_1.2.1            rstudioapi_0.17.1          \n [47] abind_1.4-8                 affy_1.82.0                \n [49] doParallel_1.0.17           codetools_0.2-20           \n [51] lattice_0.22-6              plyr_1.8.9                 \n [53] Biobase_2.64.0              withr_3.0.2                \n [55] evaluate_1.0.1              zip_2.3.1                  \n [57] xml2_1.3.6                  circlize_0.4.16            \n [59] BiocManager_1.30.25         affyio_1.74.0              \n [61] pillar_1.11.0               MatrixGenerics_1.16.0      \n [63] foreach_1.5.2               stats4_4.4.1               \n [65] MSnbase_2.30.1              MALDIquant_1.22.3          \n [67] ncdf4_1.23                  generics_0.1.3             \n [69] vroom_1.6.5                 S4Vectors_0.42.1           \n [71] hms_1.1.3                   munsell_0.5.1              \n [73] scales_1.3.0                glue_1.8.0                 \n [75] lazyeval_0.2.2              tools_4.4.1                \n [77] mzID_1.42.0                 QFeatures_1.14.2           \n [79] vsn_3.72.0                  mzR_2.38.0                 \n [81] openxlsx_4.2.7.1            XML_3.99-0.17              \n [83] grid_4.4.1                  impute_1.78.0              \n [85] MsCoreUtils_1.16.1          colorspace_2.1-1           \n [87] GenomeInfoDbData_1.2.12     PSMatch_1.8.0              \n [89] cli_3.6.3                   S4Arrays_1.4.1             \n [91] ComplexHeatmap_2.20.0       AnnotationFilter_1.28.0    \n [93] pcaMethods_1.96.0           gtable_0.3.6               \n [95] digest_0.6.37               BiocGenerics_0.50.0        \n [97] SparseArray_1.4.8           rjson_0.2.23               \n [99] htmlwidgets_1.6.4           htmltools_0.5.8.1          \n[101] lifecycle_1.0.4             httr_1.4.7                 \n[103] statmod_1.5.0               GlobalOptions_0.1.2        \n[105] bit64_4.5.2                 MASS_7.3-61",
    "crumbs": [
      "massdataset package",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Create mass_dataset class</span>"
    ]
  },
  {
    "objectID": "1-3-docker_tidymass.html",
    "href": "1-3-docker_tidymass.html",
    "title": "3  Docker version tidymass",
    "section": "",
    "text": "3.1 Install docker\nDocker is a set of platform as a service (PaaS) products that use OS-level virtualization to deliver software in packages called containers. So it is useful for people who want to share the code, data, and even analysis environment with other people to repeat their analysis and results.\nWe provide a docker version of tidymass, all the packages in tidymass and the dependent packages have been installed.\nPlease refer to the offical website to download and install docker. And then run docker.",
    "crumbs": [
      "Install tidymass",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Docker version tidymass</span>"
    ]
  },
  {
    "objectID": "1-3-docker_tidymass.html#pull-the-tidymass-image",
    "href": "1-3-docker_tidymass.html#pull-the-tidymass-image",
    "title": "3  Docker version tidymass",
    "section": "3.2 Pull the tidymass image",
    "text": "3.2 Pull the tidymass image\nOpen you terminal and then type code below:\ndocker pull jaspershen/tidymass:latest",
    "crumbs": [
      "Install tidymass",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Docker version tidymass</span>"
    ]
  },
  {
    "objectID": "1-3-docker_tidymass.html#run-tidymass-docker-image",
    "href": "1-3-docker_tidymass.html#run-tidymass-docker-image",
    "title": "3  Docker version tidymass",
    "section": "3.3 Run tidymass docker image",
    "text": "3.3 Run tidymass docker image\nIn you terminal, run the code below:\ndocker run -e PASSWORD=tidymass -p 8787:8787 jaspershen/tidymass:latest\nThe below command will link the RStudio home folder with the desktop of the local machine running the container. Anything saved or edited in the home folder when using the container will be stored on the local desktop.\ndocker run -e PASSWORD=tidymass -v ~/Desktop:/home/rstudio/ -p 8787:8787 jaspershen/tidymass:latest",
    "crumbs": [
      "Install tidymass",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Docker version tidymass</span>"
    ]
  },
  {
    "objectID": "1-3-docker_tidymass.html#open-the-rstudio-server",
    "href": "1-3-docker_tidymass.html#open-the-rstudio-server",
    "title": "3  Docker version tidymass",
    "section": "3.4 Open the RStudio server",
    "text": "3.4 Open the RStudio server\nThen open the browser and visit http://localhost:8787 to power on RStudio server. The user name is rstudio and the password is tidymass.",
    "crumbs": [
      "Install tidymass",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Docker version tidymass</span>"
    ]
  },
  {
    "objectID": "1-3-docker_tidymass.html#demo-data-and-example-analysis-code",
    "href": "1-3-docker_tidymass.html#demo-data-and-example-analysis-code",
    "title": "3  Docker version tidymass",
    "section": "3.5 Demo data and example analysis code",
    "text": "3.5 Demo data and example analysis code\nIn this tidymass docker image, a folder named “demo_data” is included to help users to learn how to use tidymass.\nOpen the tidymass_demo.Rmd file in demo_data folder, and then run it code chunk by chunk or just render it by clicking Knit on RStudio, you will get a reporting result (HTML format) of all the whole workflow.",
    "crumbs": [
      "Install tidymass",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Docker version tidymass</span>"
    ]
  },
  {
    "objectID": "1-3-docker_tidymass.html#session-information",
    "href": "1-3-docker_tidymass.html#session-information",
    "title": "3  Docker version tidymass",
    "section": "3.6 Session information",
    "text": "3.6 Session information\n\nsessionInfo()\n\nR version 4.4.1 (2024-06-14)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS 15.5\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Singapore\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n [1] htmlwidgets_1.6.4 compiler_4.4.1    fastmap_1.2.0     cli_3.6.3        \n [5] tools_4.4.1       htmltools_0.5.8.1 rstudioapi_0.17.1 rmarkdown_2.29   \n [9] knitr_1.49        jsonlite_1.8.9    xfun_0.52         digest_0.6.37    \n[13] rlang_1.1.4       evaluate_1.0.1",
    "crumbs": [
      "Install tidymass",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Docker version tidymass</span>"
    ]
  },
  {
    "objectID": "1-2-update.html",
    "href": "1-2-update.html",
    "title": "2  Update",
    "section": "",
    "text": "2.1 Check tidymass version\nThe tidymass package allows you to check the version of all packages and update them. To check for updates specifically for tidymass and its associated packages, you can use the following code.\ntidymass::check_tidymass_version()\n\nWarning in fun(libname, pkgname): mzR has been built against a different Rcpp version (1.0.12)\nthan is installed on your system (1.0.13.1). This might lead to errors\nwhen loading mzR. If you encounter such issues, please send a report,\nincluding the output of sessionInfo() to the Bioc support forum at \nhttps://support.bioconductor.org/. For details see also\nhttps://github.com/sneumann/mzR/wiki/mzR-Rcpp-compiler-linker-issue.\n\n\nRegistered S3 method overwritten by 'Hmisc':\n  method       from      \n  vcov.default fit.models\n\n\nWarning: replacing previous import 'massdataset::check_mass_dataset' by\n'metid::check_mass_dataset' when loading 'tidymass'\n\n\nWarning: replacing previous import 'masstools::remove_noise' by\n'metid::remove_noise' when loading 'tidymass'\n\n\n## tidymass/tidymass is out of date...\n\n\n##tidymass/massconverter is up-to-date devel version\n\n\n##tidymass/massdataset is up-to-date devel version\n\n\n## tidymass/massprocesser is out of date...\n\n\n##tidymass/masscleaner is up-to-date devel version\n\n\n## tidymass/massqc is out of date...\n\n\n##tidymass/metid is up-to-date devel version\n\n\n## tidymass/massstat is out of date...\n\n\n##tidymass/metpath is up-to-date devel version\n\n\n##tidymass/masstools is up-to-date devel version\n\n\nUse update_tidymass() to update the following pacakges.\n\n\n        package installed_version latest_version up_to_date\n1      tidymass             1.0.8         2.0.10      FALSE\n2 massprocesser            1.0.10         1.0.11      FALSE\n3        massqc             1.0.6          1.0.7      FALSE\n4      massstat             1.0.5          1.0.6      FALSE\nThis will list all the packages version and if there are some new versions can be updated.",
    "crumbs": [
      "Install tidymass",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Update</span>"
    ]
  },
  {
    "objectID": "1-2-update.html#update-tidymass",
    "href": "1-2-update.html#update-tidymass",
    "title": "2  Update",
    "section": "2.2 Update tidymass",
    "text": "2.2 Update tidymass\nThe update_tidymass() function can be used to update tidymass and packages within it.\n\ntidymass::update_tidymass(from = \"gitlab\")\n\nYou can change the from argument if from = \"gitlab\" doesn’t work.\n\n“github”\n“gitee”\n“tidymass.org”\n\nIf all the options of from don’t work, you can try to set fastgit as TRUE.\n\ntidymass::update_tidymass(from = \"gitlab\",\n                          fastgit = TRUE)",
    "crumbs": [
      "Install tidymass",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Update</span>"
    ]
  },
  {
    "objectID": "1-2-update.html#session-information",
    "href": "1-2-update.html#session-information",
    "title": "2  Update",
    "section": "2.3 Session information",
    "text": "2.3 Session information\n\nsessionInfo()\n\nR version 4.4.1 (2024-06-14)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS 15.5\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Singapore\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n  [1] tibble_3.2.1                polyclip_1.10-7            \n  [3] preprocessCore_1.66.0       XML_3.99-0.17              \n  [5] rpart_4.1.23                fastDummies_1.7.4          \n  [7] lifecycle_1.0.4             doParallel_1.0.17          \n  [9] globals_0.16.3              lattice_0.22-6             \n [11] MASS_7.3-61                 MultiAssayExperiment_1.30.3\n [13] backports_1.5.0             magrittr_2.0.3             \n [15] openxlsx_4.2.7.1            limma_3.60.6               \n [17] Hmisc_5.2-0                 rmarkdown_2.29             \n [19] remotes_2.5.0               doRNG_1.8.6                \n [21] zip_2.3.1                   MsCoreUtils_1.16.1         \n [23] pbapply_1.7-2               DBI_1.2.3                  \n [25] metid_1.3.1                 RColorBrewer_1.1-3         \n [27] abind_1.4-8                 zlibbioc_1.50.0            \n [29] rvest_1.0.4                 GenomicRanges_1.56.2       \n [31] purrr_1.0.2                 ggraph_2.2.1               \n [33] AnnotationFilter_1.28.0     BiocGenerics_0.50.0        \n [35] itertools_0.1-3             nnet_7.3-19                \n [37] tweenr_2.0.3                massstat_1.0.5             \n [39] circlize_0.4.16             GenomeInfoDbData_1.2.12    \n [41] IRanges_2.38.1              S4Vectors_0.42.1           \n [43] ggrepel_0.9.6               listenv_0.9.1              \n [45] ellipse_0.5.0               masstools_1.0.15           \n [47] RSpectra_0.16-2             missForest_1.5             \n [49] parallelly_1.38.0           MSnbase_2.30.1             \n [51] ncdf4_1.23                  codetools_0.2-20           \n [53] DelayedArray_0.30.1         ggforce_0.4.2              \n [55] xml2_1.3.6                  tidyselect_1.2.1           \n [57] Spectra_1.14.1              shape_1.4.6.1              \n [59] UCSC.utils_1.0.0            farver_2.1.2               \n [61] viridis_0.6.5               massdataset_1.0.34         \n [63] matrixStats_1.4.1           stats4_4.4.1               \n [65] base64enc_0.1-3             massqc_1.0.6               \n [67] jsonlite_1.8.9              GetoptLong_1.0.5           \n [69] e1071_1.7-16                tidygraph_1.3.1            \n [71] Formula_1.2-5               iterators_1.0.14           \n [73] foreach_1.5.2               tools_4.4.1                \n [75] progress_1.2.3              Rcpp_1.0.13-1              \n [77] glue_1.8.0                  rARPACK_0.11-0             \n [79] gridExtra_2.3               SparseArray_1.4.8          \n [81] xfun_0.52                   mixOmics_6.28.0            \n [83] MatrixGenerics_1.16.0       ggfortify_0.4.17           \n [85] GenomeInfoDb_1.40.1         dplyr_1.1.4                \n [87] withr_3.0.2                 BiocManager_1.30.25        \n [89] fastmap_1.2.0               digest_0.6.37              \n [91] R6_2.5.1                    colorspace_2.1-1           \n [93] tidyr_1.3.1                 generics_0.1.3             \n [95] data.table_1.16.2           corpcor_1.6.10             \n [97] robustbase_0.99-4-1         class_7.3-22               \n [99] graphlayouts_1.2.0          prettyunits_1.2.0          \n[101] PSMatch_1.8.0               httr_1.4.7                 \n[103] htmlwidgets_1.6.4           S4Arrays_1.4.1             \n[105] pkgconfig_2.0.3             gtable_0.3.6               \n[107] robust_0.7-5                tidymass_1.0.8             \n[109] ComplexHeatmap_2.20.0       impute_1.78.0              \n[111] MassSpecWavelet_1.70.0      XVector_0.44.0             \n[113] pcaPP_2.0-5                 furrr_0.3.1                \n[115] htmltools_0.5.8.1           MALDIquant_1.22.3          \n[117] ProtGenerics_1.36.0         clue_0.3-65                \n[119] scales_1.3.0                Biobase_2.64.0             \n[121] png_0.1-8                   knitr_1.49                 \n[123] MetaboCoreUtils_1.12.0      rstudioapi_0.17.1          \n[125] tzdb_0.4.0                  reshape2_1.4.4             \n[127] rjson_0.2.23                checkmate_2.3.2            \n[129] ggcorrplot_0.1.4.1          cachem_1.1.0               \n[131] proxy_0.4-27                GlobalOptions_0.1.2        \n[133] stringr_1.5.1               parallel_4.4.1             \n[135] foreign_0.8-87              mzID_1.42.0                \n[137] vsn_3.72.0                  pillar_1.11.0              \n[139] grid_4.4.1                  vctrs_0.6.5                \n[141] MsFeatures_1.12.0           pcaMethods_1.96.0          \n[143] randomForest_4.7-1.2        cluster_2.1.6              \n[145] htmlTable_2.4.3             evaluate_1.0.1             \n[147] readr_2.1.5                 mvtnorm_1.3-2              \n[149] cli_3.6.3                   compiler_4.4.1             \n[151] rlang_1.1.4                 crayon_1.5.3               \n[153] rngtools_1.5.2              Rdisop_1.64.0              \n[155] rrcov_1.7-6                 QFeatures_1.14.2           \n[157] affy_1.82.0                 plyr_1.8.9                 \n[159] masscleaner_1.0.12          fs_1.6.5                   \n[161] stringi_1.8.4               viridisLite_0.4.2          \n[163] BiocParallel_1.38.0         Biostrings_2.72.1          \n[165] munsell_0.5.1               fit.models_0.64            \n[167] lazyeval_0.2.2              xcms_4.2.3                 \n[169] massprocesser_1.0.10        Matrix_1.7-1               \n[171] hms_1.1.3                   patchwork_1.3.0            \n[173] future_1.34.0               MsExperiment_1.6.0         \n[175] ggplot2_3.5.1               KEGGREST_1.44.1            \n[177] statmod_1.5.0               SummarizedExperiment_1.34.0\n[179] mzR_2.38.0                  memoise_2.0.1              \n[181] igraph_2.1.1                affyio_1.74.0              \n[183] DEoptimR_1.1-3              metpath_1.0.10",
    "crumbs": [
      "Install tidymass",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Update</span>"
    ]
  },
  {
    "objectID": "2-1-create_mass_dataset.html#export-mass_dataset-class-object-to-csv-or-xlsx",
    "href": "2-1-create_mass_dataset.html#export-mass_dataset-class-object-to-csv-or-xlsx",
    "title": "5  Create mass_dataset class",
    "section": "5.4 Export mass_dataset class object to csv or xlsx",
    "text": "5.4 Export mass_dataset class object to csv or xlsx\n\nexport_mass_dataset(object = object_pos,\n                    file_type = \"xlsx\",\n                    path = \"demo_data/feature_table/demo_data_pos\")\n\nThen all the data will be in the feature_table/demo_data_pos folder.\n ## Session information\n\nsessionInfo()\n\nR version 4.4.1 (2024-06-14)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS 15.5\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Singapore\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] magrittr_2.0.3     masstools_1.0.15   massdataset_1.0.34 lubridate_1.9.3   \n [5] forcats_1.0.0      stringr_1.5.1      dplyr_1.1.4        purrr_1.0.2       \n [9] readr_2.1.5        tidyr_1.3.1        tibble_3.2.1       ggplot2_3.5.1     \n[13] tidyverse_2.0.0   \n\nloaded via a namespace (and not attached):\n  [1] pbapply_1.7-2               remotes_2.5.0              \n  [3] rlang_1.1.4                 clue_0.3-65                \n  [5] GetoptLong_1.0.5            matrixStats_1.4.1          \n  [7] compiler_4.4.1              png_0.1-8                  \n  [9] vctrs_0.6.5                 reshape2_1.4.4             \n [11] rvest_1.0.4                 ProtGenerics_1.36.0        \n [13] pkgconfig_2.0.3             shape_1.4.6.1              \n [15] crayon_1.5.3                fastmap_1.2.0              \n [17] XVector_0.44.0              rmarkdown_2.29             \n [19] tzdb_0.4.0                  preprocessCore_1.66.0      \n [21] UCSC.utils_1.0.0            bit_4.5.0                  \n [23] xfun_0.52                   MultiAssayExperiment_1.30.3\n [25] zlibbioc_1.50.0             GenomeInfoDb_1.40.1        \n [27] jsonlite_1.8.9              DelayedArray_0.30.1        \n [29] BiocParallel_1.38.0         parallel_4.4.1             \n [31] cluster_2.1.6               R6_2.5.1                   \n [33] stringi_1.8.4               RColorBrewer_1.1-3         \n [35] limma_3.60.6                GenomicRanges_1.56.2       \n [37] Rcpp_1.0.13-1               SummarizedExperiment_1.34.0\n [39] iterators_1.0.14            knitr_1.49                 \n [41] IRanges_2.38.1              Matrix_1.7-1               \n [43] igraph_2.1.1                timechange_0.3.0           \n [45] tidyselect_1.2.1            rstudioapi_0.17.1          \n [47] abind_1.4-8                 affy_1.82.0                \n [49] doParallel_1.0.17           codetools_0.2-20           \n [51] lattice_0.22-6              plyr_1.8.9                 \n [53] Biobase_2.64.0              withr_3.0.2                \n [55] evaluate_1.0.1              zip_2.3.1                  \n [57] xml2_1.3.6                  circlize_0.4.16            \n [59] BiocManager_1.30.25         affyio_1.74.0              \n [61] pillar_1.11.0               MatrixGenerics_1.16.0      \n [63] foreach_1.5.2               stats4_4.4.1               \n [65] MSnbase_2.30.1              MALDIquant_1.22.3          \n [67] ncdf4_1.23                  generics_0.1.3             \n [69] vroom_1.6.5                 S4Vectors_0.42.1           \n [71] hms_1.1.3                   munsell_0.5.1              \n [73] scales_1.3.0                glue_1.8.0                 \n [75] lazyeval_0.2.2              tools_4.4.1                \n [77] mzID_1.42.0                 QFeatures_1.14.2           \n [79] vsn_3.72.0                  mzR_2.38.0                 \n [81] openxlsx_4.2.7.1            XML_3.99-0.17              \n [83] grid_4.4.1                  impute_1.78.0              \n [85] MsCoreUtils_1.16.1          colorspace_2.1-1           \n [87] GenomeInfoDbData_1.2.12     PSMatch_1.8.0              \n [89] cli_3.6.3                   S4Arrays_1.4.1             \n [91] ComplexHeatmap_2.20.0       AnnotationFilter_1.28.0    \n [93] pcaMethods_1.96.0           gtable_0.3.6               \n [95] digest_0.6.37               BiocGenerics_0.50.0        \n [97] SparseArray_1.4.8           rjson_0.2.23               \n [99] htmlwidgets_1.6.4           htmltools_0.5.8.1          \n[101] lifecycle_1.0.4             httr_1.4.7                 \n[103] statmod_1.5.0               GlobalOptions_0.1.2        \n[105] bit64_4.5.2                 MASS_7.3-61",
    "crumbs": [
      "massdataset package",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Create mass_dataset class</span>"
    ]
  },
  {
    "objectID": "2-2-add_ms2.html",
    "href": "2-2-add_ms2.html",
    "title": "6  Add MS2 spectra data into mass_dataset class object”",
    "section": "",
    "text": "6.1 Data preparation\nmass_dataset class object can also contain MS2 data.",
    "crumbs": [
      "massdataset package",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Add MS2 spectra data into mass_dataset class object\"</span>"
    ]
  },
  {
    "objectID": "2-2-add_ms2.html#data-preparation",
    "href": "2-2-add_ms2.html#data-preparation",
    "title": "6  Add MS2 spectra data into mass_dataset class object”",
    "section": "",
    "text": "6.1.1 mass_dataset class object\nWe need to create a mass_dataset class object first, see this document. And here we use the data from this step as an example.\n\nload(\"demo_data/feature_table/object_pos\")\nload(\"demo_data/feature_table/object_neg\")\n\n\n\n6.1.2 MS2 data\nThe MS2 raw data should be converted to mgf format data. Please refer this document.\nHere we use the demo data for tidymass, please download it and put it in the mgf_ms2_data folder.\n💾 Download link is here.\nThen uncompress it.",
    "crumbs": [
      "massdataset package",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Add MS2 spectra data into mass_dataset class object\"</span>"
    ]
  },
  {
    "objectID": "2-2-add_ms2.html#add-ms2-to-mass_dataset-class-object",
    "href": "2-2-add_ms2.html#add-ms2-to-mass_dataset-class-object",
    "title": "6  Add MS2 spectra data into mass_dataset class object”",
    "section": "6.2 Add MS2 to mass_dataset class object",
    "text": "6.2 Add MS2 to mass_dataset class object\nPositive mode.\n\nlibrary(massdataset)\nobject_pos2 =\n  mutate_ms2(\n    object = object_pos,\n    column = \"rp\",\n    polarity = \"positive\",\n    ms1.ms2.match.mz.tol = 10,\n    ms1.ms2.match.rt.tol = 15,\n    path = \"demo_data/mgf_ms2_data/POS/\"\n  )\n\n\nobject_pos2\n\n-------------------- \nmassdataset version: 1.0.25 \n-------------------- \n1.expression_data:[ 1612 x 36 data.frame]\n2.sample_info:[ 36 x 4 data.frame]\n36 samples:bl20210902_3 bl20210902_4 bl20210902_5 ... bl20210902_37 bl20210902_38\n3.variable_info:[ 1612 x 3 data.frame]\n1612 variables:M86T44_POS M90T638_POS M91T631_POS ... M1197T265_POS M1198T265_POS\n4.sample_info_note:[ 4 x 2 data.frame]\n5.variable_info_note:[ 3 x 2 data.frame]\n6.ms2_data:[ 9 variables x 9 MS2 spectra]\n-------------------- \nProcessing information\n2 processings in total\ncreate_mass_dataset ---------- \n      Package         Function.used                Time\n1 massdataset create_mass_dataset() 2023-09-04 00:57:14\nmutate_ms2 ---------- \n      Package Function.used                Time\n1 massdataset  mutate_ms2() 2025-07-20 19:12:02\n\n\n\nobject_pos2@ms2_data\n\n$`QEP_SGA_QC_posi_ms2_ce25_01.mgf;QEP_SGA_QC_posi_ms2_ce25_02.mgf;QEP_SGA_QC_posi_ms2_ce50_01.mgf;QEP_SGA_QC_posi_ms2_ce50_02.mgf`\n-------------------- \ncolumn: rp \npolarity: positive \nmz_tol: 10 \nrt_tol (second): 15 \n-------------------- \n9 variables:\nM103T92_POS M120T92_1_POS M133T255_POS M149T93_POS M166T94_POS...\n9 MS2 spectra.\nmz103.054814801682rt96.92601 mz120.081003145403rt103.263636 mz133.101364135742rt269.674188 mz149.059844970703rt99.091818 mz166.086254683842rt103.128918...\n\n\nNegative mode.\n\nobject_neg2 =\n  mutate_ms2(\n    object = object_neg,\n    column = \"rp\",\n    polarity = \"negative\",\n    ms1.ms2.match.mz.tol = 10,\n    ms1.ms2.match.rt.tol = 15,\n    path = \"demo_data/mgf_ms2_data/NEG/\"\n  )\n\n\nobject_neg2@ms2_data\n\n$`QEP_SGA_QC_neg_ms2_ce25_01.mgf;QEP_SGA_QC_neg_ms2_ce25_02.mgf;QEP_SGA_QC_neg_ms2_ce50_01.mgf;QEP_SGA_QC_neg_ms2_ce50_02.mgf`\n-------------------- \ncolumn: rp \npolarity: negative \nmz_tol: 10 \nrt_tol (second): 15 \n-------------------- \n44 variables:\nM101T106_NEG M116T626_NEG M116T505_NEG M116T483_NEG M116T586_NEG...\n43 MS2 spectra.\nmz101.023086547852rt97.383582 mz115.919448852539rt634.03908 mz115.919456481934rt515.338818 mz115.919372558594rt471.106446 mz115.919403076172rt591.442212...",
    "crumbs": [
      "massdataset package",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Add MS2 spectra data into mass_dataset class object\"</span>"
    ]
  },
  {
    "objectID": "2-2-add_ms2.html#session-information",
    "href": "2-2-add_ms2.html#session-information",
    "title": "6  Add MS2 spectra data into mass_dataset class object”",
    "section": "6.3 Session information",
    "text": "6.3 Session information\n\nsessionInfo()\n\nR version 4.4.1 (2024-06-14)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS 15.5\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Singapore\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] ggplot2_3.5.1      dplyr_1.1.4        magrittr_2.0.3     masstools_1.0.15  \n[5] massdataset_1.0.34\n\nloaded via a namespace (and not attached):\n  [1] pbapply_1.7-2               remotes_2.5.0              \n  [3] rlang_1.1.4                 clue_0.3-65                \n  [5] GetoptLong_1.0.5            matrixStats_1.4.1          \n  [7] compiler_4.4.1              png_0.1-8                  \n  [9] vctrs_0.6.5                 reshape2_1.4.4             \n [11] rvest_1.0.4                 stringr_1.5.1              \n [13] ProtGenerics_1.36.0         pkgconfig_2.0.3            \n [15] shape_1.4.6.1               crayon_1.5.3               \n [17] fastmap_1.2.0               XVector_0.44.0             \n [19] rmarkdown_2.29              tzdb_0.4.0                 \n [21] UCSC.utils_1.0.0            preprocessCore_1.66.0      \n [23] purrr_1.0.2                 xfun_0.52                  \n [25] MultiAssayExperiment_1.30.3 zlibbioc_1.50.0            \n [27] GenomeInfoDb_1.40.1         jsonlite_1.8.9             \n [29] DelayedArray_0.30.1         BiocParallel_1.38.0        \n [31] parallel_4.4.1              cluster_2.1.6              \n [33] R6_2.5.1                    stringi_1.8.4              \n [35] RColorBrewer_1.1-3          limma_3.60.6               \n [37] GenomicRanges_1.56.2        Rcpp_1.0.13-1              \n [39] SummarizedExperiment_1.34.0 iterators_1.0.14           \n [41] knitr_1.49                  readr_2.1.5                \n [43] IRanges_2.38.1              Matrix_1.7-1               \n [45] igraph_2.1.1                tidyselect_1.2.1           \n [47] rstudioapi_0.17.1           abind_1.4-8                \n [49] doParallel_1.0.17           codetools_0.2-20           \n [51] affy_1.82.0                 lattice_0.22-6             \n [53] tibble_3.2.1                plyr_1.8.9                 \n [55] withr_3.0.2                 Biobase_2.64.0             \n [57] evaluate_1.0.1              zip_2.3.1                  \n [59] xml2_1.3.6                  circlize_0.4.16            \n [61] pillar_1.11.0               affyio_1.74.0              \n [63] BiocManager_1.30.25         MatrixGenerics_1.16.0      \n [65] foreach_1.5.2               stats4_4.4.1               \n [67] MSnbase_2.30.1              MALDIquant_1.22.3          \n [69] ncdf4_1.23                  generics_0.1.3             \n [71] hms_1.1.3                   S4Vectors_0.42.1           \n [73] munsell_0.5.1               scales_1.3.0               \n [75] glue_1.8.0                  lazyeval_0.2.2             \n [77] tools_4.4.1                 mzID_1.42.0                \n [79] QFeatures_1.14.2            vsn_3.72.0                 \n [81] mzR_2.38.0                  openxlsx_4.2.7.1           \n [83] XML_3.99-0.17               grid_4.4.1                 \n [85] impute_1.78.0               tidyr_1.3.1                \n [87] MsCoreUtils_1.16.1          colorspace_2.1-1           \n [89] GenomeInfoDbData_1.2.12     PSMatch_1.8.0              \n [91] cli_3.6.3                   S4Arrays_1.4.1             \n [93] ComplexHeatmap_2.20.0       AnnotationFilter_1.28.0    \n [95] pcaMethods_1.96.0           gtable_0.3.6               \n [97] digest_0.6.37               BiocGenerics_0.50.0        \n [99] SparseArray_1.4.8           rjson_0.2.23               \n[101] htmlwidgets_1.6.4           htmltools_0.5.8.1          \n[103] lifecycle_1.0.4             httr_1.4.7                 \n[105] GlobalOptions_0.1.2         statmod_1.5.0              \n[107] MASS_7.3-61",
    "crumbs": [
      "massdataset package",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Add MS2 spectra data into mass_dataset class object\"</span>"
    ]
  }
]